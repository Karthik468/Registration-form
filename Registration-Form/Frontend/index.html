<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New user signup</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="styles.css">
    <style>
        
    .login_form input:not(.sub){
    height:35px;
    width:350px;
    font-size:20px;
    border:1px solid silver;
    margin-bottom: 5%;
    
    }
    

.col1{
    float: left;
    margin-left: 10%;
}


.col3{
    float: right;
    margin-right: 10%;
}   

.sub:hover{
    background:rgb(63, 193, 233);
}


    </style>
</head>

<body>
    <div class="Container">
        <h1 class="label">Sign Up</h1>
        <form id="form_fe" onsubmit="return addUser()"  class="login_form">
            <label for="fname" class="font"><b>First Name</b></label>
            <input type="text" name="fname" id="fname" placeholder="Enter your first name"  maxlength="30" required><br>
            <label for="lname" class="font"><b>Last Name</b></label>
            <input type="text" name="lname" id="lname" placeholder="Enter your last name"  maxlength="30" required><br>
            <label for="email" class="font"><b>Email</b></label>
            <input type="email" name="email" id="email" placeholder="Enter your email" pattern="^[a-z0-9](\.?[a-z0-9]){2,}@gmail\.com$" title="only accepts strings ending with @gmail.com" required><br>
            <label for="phone" class="font"><b>Phone Number</b></label>
            <input type="tel" name="phone" id="phone" placeholder="888 888 8888" pattern="[0-9]{10}$" required><br>
            <label for="dob" class="font"><b>DOB</b></label>
            <input type="date" name="dob" id="dob" min="1950-01-01" required><br>
            <div class="wrap">
                <div class="col1"><input type="submit" value="Submit"  class="sub btn btn-secondary" ></div>
                <div class="col3"><button><a href="loginpage.html"  class="btn btn-secondary">Cancel</a></button></div>
            </div>
            <br><br>
            
        </form>
    </div>
    <script>
        const addUser=()=>
{ 
	
    let fname=document.forms["form_fe"]["fname"].value;
    let lname=document.forms["form_fe"]["lname"].value;
    let email=document.forms["form_fe"]["email"].value;
    let phone=document.forms["form_fe"]["phone"].value;
    let dob=document.forms["form_fe"]["dob"].value;

    let ans="";
    ans+=fname[0].toLowerCase()+fname[fname.length-1].toLowerCase()+Math.floor(Math.random()*1000)+lname[0].toLowerCase()+lname[lname.length-1].toLowerCase();
    
   
       let user={
        id:ans,
        fname:fname,
        lname:lname,
        email:email,
		phone:phone,
        dob:dob
        
    }
    //api request for adding userloyee

    fetch("http://localhost:8012/signup", {
                method: "POST",
                headers: {
                    "content-type": "application/json",
                },
                body:JSON.stringify(user),
            })
            .then(response=>{
                console.log("element added successfully");
            })

    document.write("<h2> Your UserID: "+ans+"</h2>"); 
    document.write("<h2> Your Default password: welcome123</h2>");
    document.write("<h2>Kindly update your default password</h2>");
    document.write("<a href='changepassword.html'>Change Pass</a>");
    

    return false;
}

    </script>
</body>

</html>